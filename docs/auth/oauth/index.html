<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>OAuth | </title><meta name=description content="See the gltf-viewer-app for a working example of OAuth2.
ðŸ“˜ Note
All applications submitted to the Onshape App Store (Onshape Apps) must use OAuth2 for authorization. Automation scripts (or applications not meant for the Onshape App Store) may use either OAuth2 or API Keys for authentication. OAuth2 allows applications to call Onshape APIs on behalf of the users of the application; API keys will only perform operations on behalf of the Onshape user who generated the API keys."><meta property="og:url" content="https://onshape-public.github.io/docs/auth/oauth/"><meta property="og:title" content="OAuth"><meta property="og:description" content="See the gltf-viewer-app for a working example of OAuth2.
ðŸ“˜ Note
All applications submitted to the Onshape App Store (Onshape Apps) must use OAuth2 for authorization. Automation scripts (or applications not meant for the Onshape App Store) may use either OAuth2 or API Keys for authentication. OAuth2 allows applications to call Onshape APIs on behalf of the users of the application; API keys will only perform operations on behalf of the Onshape user who generated the API keys."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2020-05-18T20:39:14-04:00"><meta property="article:modified_time" content="2020-05-18T20:39:14-04:00"><meta itemprop=name content="OAuth"><meta itemprop=description content="See the gltf-viewer-app for a working example of OAuth2.
ðŸ“˜ Note
All applications submitted to the Onshape App Store (Onshape Apps) must use OAuth2 for authorization. Automation scripts (or applications not meant for the Onshape App Store) may use either OAuth2 or API Keys for authentication. OAuth2 allows applications to call Onshape APIs on behalf of the users of the application; API keys will only perform operations on behalf of the Onshape user who generated the API keys."><meta itemprop=datePublished content="2020-05-18T20:39:14-04:00"><meta itemprop=dateModified content="2020-05-18T20:39:14-04:00"><meta itemprop=wordCount content="4291"><meta name=twitter:card content="summary"><meta name=twitter:title content="OAuth"><meta name=twitter:description content="See the gltf-viewer-app for a working example of OAuth2.
ðŸ“˜ Note
All applications submitted to the Onshape App Store (Onshape Apps) must use OAuth2 for authorization. Automation scripts (or applications not meant for the Onshape App Store) may use either OAuth2 or API Keys for authentication. OAuth2 allows applications to call Onshape APIs on behalf of the users of the application; API keys will only perform operations on behalf of the Onshape user who generated the API keys."><link rel=preload href=/scss/main.min.7622946b88aadfa24dcf933afaf03525457e05cdace62229bf02030f0a66d236.css as=style><link href=/scss/main.min.7622946b88aadfa24dcf933afaf03525457e05cdace62229bf02030f0a66d236.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><style>code{white-space:pre-wrap!important;overflow-wrap:break-word}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-3CY8X7Q128"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3CY8X7Q128")}</script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg width="142" height="39" viewBox="0 0 142 39" fill="none"><g clip-path="url(#clip0_16778_48)"><path d="M19.2798 3.09975 13.9008.0.0 8.0317v7.1885l5.51498 3.2725V11.0678L19.2798 3.09975z" fill="#40aa1d"/><path d="M0 17.5814v6.5882l13.9764 8.0695 6.1207-3.5262V21.9638l-6.1887 4.0305L0 17.5814z" fill="#40aa1d"/><path d="M22.1777 11.4219 15.6748 7.67109l5.746-3.33511 6.531 3.74215V24.1696l-5.786 3.3416L22.1777 11.4219z" fill="#40aa1d"/><path d="M16.0342 10.2202 13.6784 8.86305 7.56201 12.3968v3.1494l2.41524 1.4209V13.727l6.05695-3.5068z" fill="#3d4647"/><path d="M7.56201 16.8192v2.8859l6.34419 3.807 2.6096-1.6098V19.0066L13.9062 20.679 7.56201 16.8192z" fill="#3d4647"/><path d="M17.5687 14.0509l-2.8978-1.6703 2.5405-1.4748 2.8859 1.6605V19.635l-2.534 1.6033L17.5687 14.0509z" fill="#3d4647"/><path d="M46.6741 10.7752c-1.8797.0-3.3826.626200000000001-4.5606 1.8797-1.1023 1.2027-1.654 2.7316-1.654 4.5854S41.0112 20.6229 42.1135 21.8256c1.178 1.2525 2.6809 1.8797 4.5606 1.8797S50.0567 23.0791 51.2346 21.8256c1.1024-1.2027 1.6541-2.7315 1.6541-4.5853C52.8887 15.3865 52.337 13.8576 51.2346 12.6549c-1.1779-1.2525-2.6808-1.8797-4.5605-1.8797zm3.2077 9.8218C49.1055 21.5244 48.028 22.0005 46.6741 22.0005 45.3202 22.0005 44.2437 21.5244 43.4664 20.597c-.7515-.8767-1.1272-2.005-1.1272-3.3578.0-1.3529.375700000000002-2.4811 1.1272-3.3578C44.2427 12.9539 45.3202 12.4778 46.6741 12.4778S49.1044 12.9539 49.8818 13.8814C50.6332 14.7581 51.009 15.8863 51.009 17.2392 51.009 18.592 50.6332 19.7203 49.8818 20.597z" fill="#3d4647"/><path d="M63.286 11.1261C62.6846 10.9004 61.958 10.7752 61.131 10.7752S59.5525 10.976 58.9015 11.4014C58.2504 11.8268 57.6987 12.3288 57.2474 12.9302V10.976H55.3677V23.5045h1.8797V16.288c0-1.1272.375700000000002-2.0298 1.1023-2.7564C59.0764 12.8298 59.9779 12.4789 61.0306 12.4789S62.9103 12.8298 63.5613 13.5067C64.2124 14.1837 64.5384 15.1101 64.5384 16.2631v7.2414h1.8798v-7.291C66.4182 14.5346 65.8924 13.2066 64.8645 12.1798 64.4132 11.7037 63.8874 11.3528 63.286 11.1271V11.1261z" fill="#3d4647"/><path d="M77.0672 17.0135C76.441 16.763 75.7889 16.5622 75.0623 16.4121 74.3357 16.2869 73.6587 16.1368 73.0325 15.9608 72.4063 15.7859 71.9053 15.5851 71.5037 15.3098 71.0772 15.0593 70.8774 14.6836 70.8774 14.1826 70.8774 12.9799 71.8546 12.3785 73.7839 12.3785c1.9294.0 2.9562.651 3.1322 1.9542h1.9045C78.6954 13.3059 78.2689 12.5037 77.5423 11.8775c-.8767-.7266-2.1043-1.1023-3.6331-1.1023C72.281 10.7752 71.0783 11.0753 70.2512 11.7026 69.4242 12.3288 68.9988 13.2314 68.9988 14.3586 68.9988 15.1349 69.1996 15.7363 69.625 16.1627 70.0256 16.5881 70.5266 16.939 71.1538 17.1895 71.7801 17.44 72.457 17.6408 73.1836 17.7661 73.9103 17.9161 74.5613 18.0662 75.1886 18.2422 75.8148 18.4171 76.3158 18.6428 76.7422 18.9191 77.1428 19.1945 77.3436 19.5961 77.3436 20.1219 77.3436 20.8982 76.9431 21.4251 76.1409 21.7501 75.79 21.8753 75.4391 21.9757 75.0634 22.0254 74.6876 22.075 74.3119 22.101 73.8854 22.101 73.459 22.101 73.0087 22.0254 72.5823 21.9001 71.4043 21.4996 70.7533 20.7222 70.628 19.5702H68.6738C68.7494 20.7481 69.2255 21.7252 70.1271 22.4518 71.1042 23.2789 72.4322 23.7043 74.1111 23.7043 75.6896 23.7043 76.9171 23.3782 77.8446 22.7272 78.772 22.101 79.2223 21.1735 79.2223 19.9459 79.2223 19.1696 79.0214 18.5423 78.6209 18.0921 78.1944 17.6408 77.6934 17.2899 77.0672 17.0146V17.0135z" fill="#3d4647"/><path d="M89.5438 11.1261C88.9425 10.9004 88.2158 10.7752 87.3888 10.7752S85.8103 10.976 85.1593 11.4014C84.5082 11.8268 83.9565 12.3288 83.5052 12.9302V5.96413H81.6255V23.5035h1.8797V16.2869c0-1.1272.375699999999995-2.0298 1.1024-2.7564C85.3342 12.8287 86.2357 12.4778 87.2884 12.4778S89.1681 12.8287 89.8191 13.5057C90.4702 14.1826 90.7963 15.109 90.7963 16.2621v7.2414H92.676V16.2124C92.676 14.5335 92.1502 13.2055 91.1223 12.1787 90.671 11.7026 90.1452 11.3517 89.5438 11.1261z" fill="#3d4647"/><path d="M105.579 13.0047C104.552 11.5266 103.099 10.7752 101.219 10.7752c-1.8792.0-3.407.626200000000001-4.5342 1.8797-1.1023 1.2276-1.654 2.7564-1.654 4.5854.0 1.8289.551699999999997 3.3577 1.654 4.5853C97.812 23.0781 99.2912 23.7053 101.094 23.7053c1.979.0 3.483-.726600000000001 4.485-2.2046v2.0049H107.459V10.9771H105.579v2.0297V13.0047zM104.552 20.597C103.776 21.5244 102.699 22.0005 101.345 22.0005 99.9908 22.0005 98.9144 21.5244 98.0873 20.597 97.311 19.7203 96.9094 18.592 96.9094 17.2392 96.9094 15.8863 97.31 14.7581 98.0873 13.8814 98.9144 12.9539 100.017 12.4778 101.345 12.4778S103.775 12.9539 104.552 13.8814C105.304 14.7581 105.68 15.8863 105.68 17.2392 105.68 18.592 105.304 19.7203 104.552 20.597z" fill="#3d4647"/><path d="M117.08 10.7752c-1.979.0-3.483.7266-4.485 2.2047v-2.005h-1.88V28.4646h1.88V21.4737c1.027 1.478 2.48 2.2295 4.36 2.2295C118.834 23.7032 120.337 23.077 121.465 21.8235c1.127-1.2276 1.678-2.7564 1.678-4.5854S122.592 13.8803 121.465 12.6527C120.337 11.4003 118.884 10.773 117.08 10.773V10.7752zM120.087 20.597C119.26 21.5244 118.158 22.0005 116.83 22.0005S114.399 21.5244 113.622 20.597C112.87 19.7203 112.495 18.592 112.495 17.2392c0-1.3529.375-2.4811 1.127-3.3578C114.398 12.9539 115.476 12.4778 116.83 12.4778 118.183 12.4778 119.26 12.9539 120.087 13.8814 120.863 14.7581 121.265 15.8863 121.265 17.2392 121.265 18.592 120.864 19.7203 120.087 20.597z" fill="#3d4647"/><path d="M131.036 10.7752C129.156 10.7752 127.653 11.4014 126.475 12.6549 125.373 13.8576 124.821 15.3865 124.821 17.2403c0 1.8538.576999999999998 3.3577 1.729 4.5853C127.728 23.0781 129.281 23.7054 131.16 23.7054 132.638 23.7054 133.866 23.3545 134.818 22.6527 135.745 21.9509 136.446 21.0245 136.873 19.8963H134.818C134.091 21.2998 132.864 22.0005 131.185 22.0005 129.957 22.0005 128.929 21.6248 128.128 20.8475 127.352 20.096 126.876 19.1437 126.751 17.9906h10.498v-.7514c0-1.8538-.550999999999988-3.3826-1.654-4.5854C134.417 11.4014 132.915 10.7741 131.035 10.7741L131.036 10.7752zm-4.259 5.462C126.951 15.1349 127.403 14.2323 128.129 13.5564 128.906 12.8298 129.884 12.4789 131.036 12.4789 132.188 12.4789 133.166 12.8298 133.942 13.5564 134.669 14.2334 135.12 15.1349 135.295 16.2372H126.777z" fill="#3d4647"/><path d="M140.921 12.3882C140.993 12.2932 141.032 12.182 141.032 12.0546 141.032 11.8656 140.965 11.7156 140.826 11.5979 140.686 11.4802 140.464 11.4251 140.164 11.4251H139.262V13.551H139.652V12.7715H140.192C140.375 12.7715 140.497 12.8438 140.57 12.9939 140.603 13.0662 140.619 13.1774 140.619 13.3394V13.551H141.004v-.2613C141.004 13.2336 140.998 13.1731 140.988 13.1008 140.943 12.8276 140.82 12.6614 140.615 12.5998 140.744 12.5609 140.849 12.4886 140.921 12.3882zM140.509 12.3493C140.414 12.4109 140.292 12.4379 140.137 12.4379H139.653V11.7533H140.126C140.327 11.7533 140.465 11.7814 140.537 11.8419 140.61 11.9034 140.649 11.992 140.649 12.0978 140.649 12.2036 140.604 12.2867 140.509 12.3483V12.3493z" fill="#3d4647"/><path d="M141.85 11.7425C141.749 11.5147 141.615 11.3085 141.444 11.1358 141.271 10.963 141.066 10.8302 140.837 10.7298 140.603 10.6294 140.353 10.5797 140.091 10.5797S139.579 10.6294 139.35 10.7298C139.121 10.8302 138.922 10.9641 138.749 11.1358 138.576 11.3085 138.437 11.5137 138.338 11.7425 138.237 11.9758 138.188 12.2262 138.188 12.4886S138.237 13.0004 138.338 13.2293C138.438 13.4582 138.577 13.6579 138.749 13.8306 138.922 14.0034 139.121 14.1427 139.35 14.242 139.579 14.3413 139.829 14.3921 140.091 14.3921S140.603 14.3424 140.837 14.242C141.065 14.1416 141.271 14.0023 141.444 13.8306 141.617 13.6579 141.749 13.4582 141.85 13.2293 141.95 13.0004 142 12.751 142 12.4886S141.95 11.9768 141.85 11.7425zM141.599 13.117C141.516 13.3178 141.398 13.4895 141.248 13.6406 140.931 13.958 140.541 14.1189 140.091 14.1189 139.641 14.1189 139.251 13.957 138.939 13.6406 138.789 13.4905 138.672 13.3178 138.588 13.117 138.505 12.9226 138.46 12.711 138.46 12.4886 138.46 12.0373 138.622 11.654 138.938 11.3312 139.25 11.0138 139.633 10.8529 140.09 10.8529S140.93 11.0138 141.247 11.3312C141.397 11.4813 141.514 11.654 141.598 11.8484 141.681 12.0492 141.727 12.2597 141.727 12.4832S141.682 12.9226 141.598 13.1181L141.599 13.117z" fill="#3d4647"/><path d="M111.538 30.1521v2.751C111.94 32.3255 112.517 32.0318 113.29 32.0318 113.995 32.0318 114.564 32.2769 115.004 32.766 115.444 33.2454 115.66 33.8424 115.66 34.5582 115.66 35.2741 115.445 35.8701 115.004 36.3494 114.563 36.8396 113.976 37.0836 113.242 37.0836 112.507 37.0836 111.93 36.7997 111.538 36.2209V37.0048H110.804V30.151H111.538V30.1521zm1.655 6.2675C113.712 36.4196 114.143 36.2339 114.467 35.8711 114.77 35.5278 114.927 35.0884 114.927 34.5593 114.927 34.0303 114.77 33.5898 114.467 33.2464 114.143 32.8837 113.712 32.698 113.193 32.698 112.674 32.698 112.244 32.8837 111.94 33.2464 111.647 33.5898 111.499 34.0303 111.499 34.5593 111.499 35.0884 111.646 35.5278 111.94 35.8711 112.244 36.2339 112.664 36.4196 113.193 36.4196z" fill="#3d4647"/><path d="M120.821 32.1106l-2.898 6.8344H117.13L118.02 36.9379l-1.997-4.8273H116.836L118.412 36.1259l1.607-4.0153H120.821z" fill="#3d4647"/><path d="M124.308 32.1106V32.8945C124.7 32.3168 125.288 32.0318 126.061 32.0318 126.766 32.0318 127.335 32.2769 127.774 32.766 128.215 33.2454 128.431 33.8424 128.431 34.5582 128.431 35.2741 128.216 35.87 127.774 36.3494 127.334 36.8396 126.746 37.0836 126.012 37.0836S124.71 36.7899 124.308 36.2123v2.7316H123.574V32.1095H124.308V32.1106zM125.964 32.699C125.434 32.699 125.015 32.8847 124.71 33.2475 124.417 33.5909 124.27 34.0314 124.27 34.5604 124.27 35.0894 124.416 35.5289 124.71 35.8722 125.015 36.235 125.434 36.4207 125.964 36.4207 126.493 36.4207 126.914 36.235 127.238 35.8722 127.541 35.5289 127.698 35.0894 127.698 34.5604 127.698 34.0314 127.541 33.5909 127.238 33.2475 126.914 32.8847 126.483 32.699 125.964 32.699z" fill="#3d4647"/><path d="M130.655 37.007H129.921V32.7574H128.922V32.1117H129.921V30.3594H130.655v1.7523h1.126V32.7574h-1.126V37.007z" fill="#3d4647"/><path d="M134.846 36.4196C135.159 36.4196 135.433 36.3322 135.678 36.1551 135.923 35.9791 136.099 35.7535 136.207 35.4706H137.001C136.854 35.95 136.58 36.3419 136.178 36.6355 135.757 36.94 135.268 37.0869 134.691 37.0869 133.976 37.0869 133.388 36.8418 132.938 36.3527 132.498 35.8733 132.282 35.2762 132.282 34.5615 132.282 33.8467 132.497 33.2486 132.938 32.7692 133.388 32.2791 133.976 32.035 134.691 32.035 135.268 32.035 135.758 32.1819 136.178 32.4864 136.58 32.78 136.854 33.1709 137.001 33.6513H136.207C136.101 33.3674 135.923 33.1417 135.678 32.9668 135.433 32.7908 135.16 32.7023 134.846 32.7023S134.268 32.7509 134.052 32.8491C133.827 32.9474 133.641 33.0834 133.494 33.2508 133.17 33.6027 133.015 34.0443 133.015 34.5636 133.015 35.083 133.171 35.5235 133.494 35.8755 133.817 36.2382 134.268 36.4239 134.846 36.4239V36.4196z" fill="#3d4647"/></g><defs><clipPath id="clip0_16778_48"><rect width="142" height="39" fill="#fff"/></clipPath></defs></svg></span><span class=navbar-brand__name></span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://cad.onshape.com/glassworks/explorer/ target=_blank rel=noopener><span>API Explorer</span></a></li><li class=nav-item><a class=nav-link href=https://cad.onshape.com target=_blank rel=noopener><span>Onshape</span></a></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this siteâ€¦" aria-label="Search this siteâ€¦" autocomplete=off data-offline-search-index-json-src=/offline-search-index.58421f2cda46ec39094cac70865c4922.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this siteâ€¦" aria-label="Search this siteâ€¦" autocomplete=off data-offline-search-index-json-src=/offline-search-index.58421f2cda46ec39094cac70865c4922.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="td-sidebar-nav collapse td-sidebar-nav--search-disabled" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ title="Welcome to the Onshape Developer Documentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Welcome</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsapi-intro-li><a href=/docs/api-intro/ title="Introduction to the Onshape REST API" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsapi-intro><span>API Intro</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-introexplorer-li><a href=/docs/api-intro/explorer/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-introexplorer><span>API Explorer</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-introquickstart-li><a href=/docs/api-intro/quickstart/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-introquickstart><span>Quick Start</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-introarchitecture-li><a href=/docs/api-intro/architecture/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-introarchitecture><span>Architecture</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-introwhyonshape-li><a href=/docs/api-intro/whyonshape/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-introwhyonshape><span>Why Onshape?</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsauth-li><a href=/docs/auth/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsauth><span>Authentication</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsauthoauth-li><a href=/docs/auth/oauth/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docsauthoauth><span class=td-sidebar-nav-active-item>OAuth</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsauthapikeys-li><a href=/docs/auth/apikeys/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsauthapikeys><span>API Keys</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsauthlimits-li><a href=/docs/auth/limits/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsauthlimits><span>API Limits</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsapi-adv-li><a href=/docs/api-adv/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsapi-adv><span>API Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-advassemblies-li><a href=/docs/api-adv/assemblies/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-advassemblies><span>Assemblies</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-advassociativity-li><a href=/docs/api-adv/associativity/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-advassociativity><span>Associativity</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-advbilling-li><a href=/docs/api-adv/billing/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-advbilling><span>Billing</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-advconfigs-li><a href=/docs/api-adv/configs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-advconfigs><span>Configurations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-advdocuments-li><a href=/docs/api-adv/documents/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-advdocuments><span>Documents</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-advdrawings-li><a href=/docs/api-adv/drawings/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-advdrawings><span>Drawings</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-advfeatureaccess-li><a href=/docs/api-adv/featureaccess/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-advfeatureaccess><span>Features</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-advfs-li><a href=/docs/api-adv/fs/ title="Evaluating FeatureScript" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-advfs><span>FeatureScript</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-advtranslation-li><a href=/docs/api-adv/translation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-advtranslation><span>Import & Export</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-advmetadata-li><a href=/docs/api-adv/metadata/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-advmetadata><span>Metadata</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-advpartstudios-li><a href=/docs/api-adv/partstudios/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-advpartstudios><span>Part Studios</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-advrelmgmt-li><a href=/docs/api-adv/relmgmt/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-advrelmgmt><span>Release Management</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapi-adverrors-li><a href=/docs/api-adv/errors/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-adverrors><span>Response Codes</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsapp-dev-li><a href=/docs/app-dev/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsapp-dev><span>App Development</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapp-devextensions-li><a href=/docs/app-dev/extensions/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapp-devextensions><span>Extensions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapp-devclientmessaging-li><a href=/docs/app-dev/clientmessaging/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapp-devclientmessaging><span>Client Messaging</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapp-devstructuredstorage-li><a href=/docs/app-dev/structuredstorage/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapp-devstructuredstorage><span>Structured Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapp-devwebhook-li><a href=/docs/app-dev/webhook/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapp-devwebhook><span>Webhooks</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsapp-store-li><a href=/docs/app-store/ title="Onshape App Store" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsapp-store><span>App Store</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapp-storechecklist-li><a href=/docs/app-store/checklist/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapp-storechecklist><span>Launch Checklist</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapp-storetestingguidelines-li><a href=/docs/app-store/testingguidelines/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapp-storetestingguidelines><span>Testing Guidelines</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsapp-storequality-li><a href=/docs/app-store/quality/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapp-storequality><span>Quality Considerations</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstutorials-li><a href=/docs/tutorials/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docstutorials><span>Sample Apps</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docstutorialssync-li><a href=/docs/tutorials/sync/ title="Sync Data and Metadata" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialssync><span>Sync Data</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docstutorialsreleases-li><a href=/docs/tutorials/releases/ title="Sync Releases and Revisions" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsreleases><span>Sync Releases</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docstutorialsderivative-li><a href=/docs/tutorials/derivative/ title="Generate Derivative Files" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsderivative><span>Derivative Files</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docstutorialscreateextension-li><a href=/docs/tutorials/createextension/ title="Create an Extension" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialscreateextension><span>Extensions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docstutorialsgltf-li><a href=/docs/tutorials/gltf/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsgltf><span>glTF Viewer</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshelp-li><a href=/docs/help/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docshelp><span>Get Help</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docschangelog-li><a href=/docs/changelog/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docschangelog><span>Changelog</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#what-is-oauth2>What is OAuth2?</a><ul><li><a href=#oauth2--onshape>OAuth2 & Onshape</a></li><li><a href=#more-resources>More resources</a></li></ul></li><li><a href=#implement-oauth2>Implement OAuth2</a><ul><li><a href=#1-register-the-app>1: Register the app</a></li><li><a href=#2-get-the-user-authorization-code>2: Get the user authorization code</a></li><li><a href=#3-exchange-the-code-for-an-access-token>3: Exchange the code for an access token</a></li><li><a href=#4-use-the-access-token>4: Use the access token</a></li><li><a href=#5-refresh-the-token>5: Refresh the token</a></li><li><a href=#6-grant-authorization>6: Grant authorization</a></li></ul></li><li><a href=#notes>Notes</a><ul><li><a href=#installed-desktop-applications>Installed desktop applications</a></li><li><a href=#enterprise-users>Enterprise users</a></li><li><a href=#3rd-party-cookies>3rd-party cookies</a></li><li><a href=#debugging>Debugging</a></li></ul></li><li><a href=#final-code>Final Code</a><ul><li><a href=#nodejs>Node.js</a></li><li><a href=#python>Python</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Welcome</a></li><li class=breadcrumb-item><a href=/docs/auth/>Authentication</a></li><li class="breadcrumb-item active" aria-current=page>OAuth</li></ol></nav><div class=td-content><h1>OAuth</h1><header class=article-meta></header><p><strong>See the <a href=https://github.com/onshape-public/app-gltf-viewer>gltf-viewer-app</a> for a working example of OAuth2.</strong></p><blockquote><p>ðŸ“˜ <strong>Note</strong></p><p>All applications submitted to the Onshape App Store (Onshape Apps) must use OAuth2 for authorization. Automation scripts (or applications not meant for the Onshape App Store) may use either OAuth2 or <a href=/docs/auth/apikeys>API Keys</a> for authentication. OAuth2 allows applications to call Onshape APIs on behalf of the users of the application; API keys will only perform operations on behalf of the Onshape user who generated the API keys.</p></blockquote><h2 id=what-is-oauth2>What is OAuth2?</h2><p>The OAuth (Open authorization) protocol was developed by the Internet Engineering Task Force, an open standards organization that develops and promotes voluntary Internet standards (particularly the technical standards that comprise the Internet protocol suite) to enable secure, delegated access to an application&rsquo;s resources.</p><p>The OAuth2 protocol enables an application to access a resource that is under the control of someone else. In order to access that resource, a <i>token</i> is required. The token represent the delegated rights of access (that is, what rights this application has, such as read/write/update, scope, rights to different resources, and more).</p><p><i>This means the application can be accessed by a third-party system without that system
impersonating the user that controls the resource.</i></p><p>A good analogy is the hotel check-in process. When you arrive at the front desk of a hotel, you provide an ID and a form of payment. Then, you are given a key card that opens a specific door. When you reach that door, you swipe your key card and are granted access. The door itself doesnâ€™t know who you are or anything about you, it just knows that the key card was encoded correctly, and it allows you access. At some point, the key card expires, and the door no longer lets you into the room. This is the same for access tokens in the OAuth2 flow.</p><p>With the OAuth2 protocol, you register your application with the third party, and you are given a set of keys. These keys get exchanged for an access token that grants you access to resources in the third-party application. The token expires regularly; you must get a new token to access the application again. For this, you are provided with a <i>refresh token</i>. Sending the refresh token to the authentication server updates your access token and gives you a new refresh token.</p><p><img src=/images/APITokenRequestDiagram.png alt="api token request diagram"></p><p>Keep in mind:</p><ul><li><a href=/docs/auth/apikeys>API keys</a> are used to authenticate an application, NOT its users.</li><li>OAuth2 authenticates an application AND users of the application by ensuring the users are authorized to access Onshape.</li></ul><h3 id=oauth2--onshape>OAuth2 & Onshape</h3><p>The first step in the OAuth flow is for the Onshape user to request that Onshape let the third-party application access Onshape.</p><p>Once the user has authorized the application, they are redirected to a predefined URL (called a <i>redirect URL</i>) with a code that will requests an access token from Onshape. Therefore, the redirect URL should contain a script that can capture the authorization code.</p><p>You will use the access token to authenticate requests to the Onshape API. The token expires after preset amount of time. To get a new valid access token after one has expired, you must use the refresh token to request a new access token. Refreshing the access token also provides you with an updated refresh token to use in the next refresh access token request. Make sure to store both the the access token and the refresh token, and update them with each refresh of the token. The authorization token must accompany any call to the API, this is done by adding the token to an Authorization field in the header of each request:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>Authorization: Bearer &lt;accessToken&gt;
</span></span></code></pre></div><p>If correctly authenticated, most responses from the REST API call return JSON data (though some return binary data), with an HTTP response code of <code>200 Success</code>, <code>204 - No Content</code>, or <code>301 - Permanent Redirect</code>. <code>301</code> responses will include a redirect for you to follow.</p><p>In the event that the authorization code is incorrect (for instance, if it expired), you will receive an <strong>HTTP 401</strong> response. This response means that the client request has not been completed, since it lacks valid authentication credentials for the requested resource. In this event, your code for each call to the REST API should include a catch clause for a 401 exception. Once caught, you can refresh the token and make the request again. Pay close attention to the <code>Content-Type</code> header for what data to parse and expect.</p><p>When integrating with Onshape, OAuth tokens give third-party applications (such as desktop applications or web services) access to users&rsquo; data as defined by the permissions scope (such as users&rsquo; documents or profile information). Using OAuth terminology, Onshape acts as both the authorization and resource server, while the desktop or web-based application is the client. Resource owners have the option of granting or denying access to applications.</p><p>Once obtained, an OAuth token will work for third-party APIs under <code>/api</code>. Do NOT attempt to use an OAuth token to fetch the URLs typically displayed in a web browsers location bar.</p><h3 id=more-resources>More resources</h3><ul><li><a href=https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2>Digital Ocean</a> - A good resource for learning more about OAuth2.</li><li><a href=http://tools.ietf.org/html/rfc6749>RFC 6749</a> - The reference for the OAuth framework as a whole. Most of this document describes how to implement the OAuth exchanges described by the reference within the context of Onshape and client applications.</li><li><a href=http://tools.ietf.org/html/rfc6750>RFC 6750</a> - Describes the exchange of OAuth access tokens between clients and OAuth servers.</li></ul><h2 id=implement-oauth2>Implement OAuth2</h2><p>This OAuth tutorial demonstrates how to recreate the authentication process in Node.js found in the <a href=https://github.com/onshape-public/app-gltf-viewer>gltf-viewer-app</a> sample code. The <a href=#final-code>final code</a> in Node.js and other languages can be found at the end of this page.</p><blockquote><p>ðŸ“˜ <strong>Note</strong></p><p>Enterprise administrators can also create and manage OAuth applications for the Enterprise from within their Developer settings. See <a href=https://cad.onshape.com/help/Content/Plans/developer.htm>Onshape Help: Enterprise Developer Settings</a> for details.</p></blockquote><h3 id=1-register-the-app>1: Register the app</h3><ol><li>Navigate to <a href=https://cad.onshape.com/appstore/dev-portal>https://cad.onshape.com/appstore/dev-portal</a> and sign in.</li><li>In the left sidebar, click <strong>OAuth applications</strong>.</li><li>Click the <strong>Create new OAuth application</strong> button.</li><li>Fill out the form as follows:<ul><li>Name: <code>gltf-viewer-yourname</code><ul><li>The application name to display to users.</li><li>Should include the name of your company to differentiate it from other possibly similar applications.</li></ul></li><li>Primary format: <code>com.yourname.gltf-viewer</code><ul><li>String that uniquely identifies your application and is a marker for the data it might store on Onshape servers.</li><li>Cannot be changed after the application is registered.</li></ul></li><li>Summary: <code>Onshape OAuth tutorial</code><ul><li>Description of your application.</li><li>Displayed to the user when theyâ€™re asked to grant the application permission to access their data.</li></ul></li><li>Redirect URLs: <code>http://localhost:5000/token</code><ul><li>Your application must specify at least one URL used in the OAuth protocol exchanges.</li><li>This URL must also use SSL (a URL that begins withÂ https), with two exceptions applicable for
installed desktop applications: <code>http://localhost:&lt;port></code> and <code>urn:ietf:wg:oauth:2.0:oob</code>.</li><li>e.g., <code>https://app-gltf-viewer-yourname-c11f263794bc.herokuapp.com/oauthRedirect</code></li></ul></li><li>Admin team: <code>No Team</code><ul><li>Optional.</li><li>If defined, members of the team can make changes to the definition of this OAuth application.</li><li>See the <a href=https://cad.onshape.com/help/Content/teams-enterprise.htm>Help Docs: Teams</a> page for more information on creating teams in Onshape.</li></ul></li><li>OAuth URL: <code>none</code><ul><li>Should contain the URL of your deployed application.</li><li>This is the first URL called from the Onshape Applications page.</li><li>The page hosted at this URL should handle the OAuth authentication. Once your applicationâ€™s server has been authenticated on behalf of the user, that user should be redirected to your applications content.</li><li>If you have not deployed your app yet, you can leave this field blank (as shown in this example) for local work and update it later.</li><li>e.g., <code>https://app-gltf-viewer-yourname-c11f263794bc.herokuapp.com/oauthSignin</code></li></ul></li><li>Settings: check <strong>Supports collaboration</strong></li><li>Permissions: This is also called application scope, and it defines what access rights your application has to the userâ€™s data.<ul><li><strong>Application can read your profile information</strong> (<code>OAuth2ReadPII</code>) - Enable your application to access the Onshape user profile. Check this option.</li><li><strong>Application can read your documents</strong> (<code>OAuth2Read</code>) - Onshape documents created by this user can be accessed with read privileges only. This means the documents and associated data can be viewed, but not updated or modified in any way, which can be a useful way to interact with data without risk of accidentally making unwanted changes. Check this option.</li><li><strong>Application can write to your documents</strong> (<code>OAuth2Write</code>) - The user-owned Onshape documents can be modified by this application. Check this option.</li><li><strong>Application can delete documents and workspaces</strong> (<code>OAuth2Delete</code>) - Your application will be able to delete content, including documents, workspaces, teams, comments, etc. Do not check this option for this example.</li><li><strong>Application can request Purchases on Your behalf</strong> (<code>OAuth2Purchase</code>) - The application will have access to make purchases if required. Do not check this option for this example.</li><li><strong>Application can share and unshare documents on your behalf</strong> (<code>OAuth2Share</code>) - Onshapeâ€™s document sharing capabilities are very powerful; they enable other parties to access your shared documents with predefined rights. If this option is checked, the application can automatically share a document with other people. Do not check this option for this example.</li></ul></li></ul></li><li>Click <strong>Create application</strong>.</li><li><font style=color:red><b>COPY THE OAUTH SECRET FROM THE POP-UP WINDOW.<b></font><ul><li>You will not be able to access this secret again.</li><li>This secret is unique to you and your app and should be protected like any sensitive password. For example, it should <em>NOT</em> be checked in to source code control systems.</li></ul></li><li>Click <strong>Close</strong>.</li><li>Copy the <strong>OAuth client identifier</strong> from the app Details page that opens.<ul><li>These OAuth secret and client ID keys will be used in your code for requesting a one-time user authorization code from Onshape.</li></ul></li></ol><p>Your application is now registered with Onshape and you have options to
modify the application definition through this portal.</p><img src=/images/dev-portal-app-details-01.png alt="the gltf-viewer app in the onshape dev portal app details screen"><h3 id=2-get-the-user-authorization-code>2: Get the user authorization code</h3><p>Weâ€™ll start by loading the basic libraries required to run this sample. We&rsquo;ll use Passport to authenticate requests through plugins known as strategies. In this example, we&rsquo;ll use an Onshape-developed plugin called <code>passport-onshape</code>, but you can define your own strategy to use with Passport, if you prefer. You can find more information on <a href=https://www.npmjs.com/package/passport>Passport here</a>.</p><ol><li>Create a directory for your app, and then install Passport and passport-onshape:</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>npm install passport
</span></span><span style=display:flex><span>npm install passport-onshape
</span></span></code></pre></div><ol start=2><li>Next, create a file calls <code>app.js</code> and add the following definitions to the top of the file:</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#aaa;font-style:italic>// App definitions 
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span><span style=color:#00a>const</span> path = require(<span style=color:#a50>&#39;path&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#00a>const</span> uuid = require(<span style=color:#a50>&#39;uuid&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a>const</span> express = require(<span style=color:#a50>&#39;express&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#00a>const</span> session = require(<span style=color:#a50>&#39;express-session&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#00a>const</span> bodyParser = require(<span style=color:#a50>&#39;body-parser&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a>const</span> passport = require(<span style=color:#a50>&#39;passport&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#00a>const</span> OnshapeStrategy = require(<span style=color:#a50>&#39;passport-onshape&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a>const</span> config = require(<span style=color:#a50>&#39;./config&#39;</span>);
</span></span></code></pre></div><ol start=3><li>Next, tell Express to use Passport and initialize it. Note: you can replace the Express code with code for the web server of your choice.</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#aaa;font-style:italic>// Tell Express to use Passport, and initialize it.
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span><span style=color:#00a>const</span> app = express();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app.use(express.<span style=color:#00a>static</span>(path.join(__dirname, <span style=color:#a50>&#39;public&#39;</span>)));
</span></span><span style=display:flex><span>app.use(express.<span style=color:#00a>static</span>(path.join(__dirname, <span style=color:#a50>&#39;dist&#39;</span>)));
</span></span><span style=display:flex><span>app.use(bodyParser.json());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app.set(<span style=color:#a50>&#39;trust proxy&#39;</span>, <span style=color:#099>1</span>); <span style=color:#aaa;font-style:italic>// To allow to run correctly behind Heroku when deployed
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>
</span></span><span style=display:flex><span>app.use(session({
</span></span><span style=display:flex><span>    secret: config.sessionSecret,
</span></span><span style=display:flex><span>    saveUninitialized: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    resave: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    cookie: {
</span></span><span style=display:flex><span>        name: <span style=color:#a50>&#39;app-gltf-viewer&#39;</span>,
</span></span><span style=display:flex><span>        sameSite: <span style=color:#a50>&#39;none&#39;</span>,
</span></span><span style=display:flex><span>        secure: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>        httpOnly: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>        path: <span style=color:#a50>&#39;/&#39;</span>,
</span></span><span style=display:flex><span>        maxAge: <span style=color:#099>1000</span> * <span style=color:#099>60</span> * <span style=color:#099>60</span> * <span style=color:#099>24</span> <span style=color:#aaa;font-style:italic>// 1 day
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>    }
</span></span><span style=display:flex><span>}));
</span></span><span style=display:flex><span>app.use(passport.initialize());
</span></span><span style=display:flex><span>app.use(passport.session());
</span></span></code></pre></div><ol start=4><li>Next, we&rsquo;ll store the Onshape user information so it can be retrieved from <code>req.user</code> in
each call. Passport usesÂ the <code>serializeUser</code> function to persist user data (after successful
authentication) into the session. The functionÂ <code>deserializeUser</code> is used
to retrieve user data from session.</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Store the Onshape user information
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>passport.serializeUser((user, done) =&gt; done(<span style=color:#00a>null</span>, user));
</span></span><span style=display:flex><span>passport.deserializeUser((obj, done) =&gt; done(<span style=color:#00a>null</span>, obj));
</span></span></code></pre></div><ol start=6><li>Initialize Passport with the Onshape Strategy:</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Initialize Passport with the Onshape Strategy
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>passport.use(<span style=color:#00a>new</span> OnshapeStrategy({
</span></span><span style=display:flex><span>        clientID: config.oauthClientId,
</span></span><span style=display:flex><span>        clientSecret: config.oauthClientSecret,
</span></span><span style=display:flex><span>        callbackURL: config.oauthCallbackUrl,
</span></span><span style=display:flex><span>        authorizationURL: <span style=color:#a50>`</span><span style=color:#a50>${</span>config.oauthUrl<span style=color:#a50>}</span><span style=color:#a50>/oauth/authorize`</span>,
</span></span><span style=display:flex><span>        tokenURL: <span style=color:#a50>`</span><span style=color:#a50>${</span>config.oauthUrl<span style=color:#a50>}</span><span style=color:#a50>/oauth/token`</span>,
</span></span><span style=display:flex><span>        userProfileURL: <span style=color:#a50>`</span><span style=color:#a50>${</span>config.oauthUrl<span style=color:#a50>}</span><span style=color:#a50>/api/users/sessioninfo`</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    (accessToken, refreshToken, profile, done) =&gt; {
</span></span><span style=display:flex><span>        profile.accessToken = accessToken;
</span></span><span style=display:flex><span>        profile.refreshToken = refreshToken;
</span></span><span style=display:flex><span>        <span style=color:#00a>return</span> done(<span style=color:#00a>null</span>, profile);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>));
</span></span></code></pre></div><ol start=7><li>Open your environment variables file (e.g.,<code>.env</code>, <code>.bashrc</code>, <code>.bash_profile</code>, <code>.zshrc,</code> etc.) and add the following environment variables, then save and close the file.</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>authorizationURL : https://oauth.onshape.com/oauth/authorize
</span></span><span style=display:flex><span>tokenURL : https://oauth.onshape.com/oauth/token
</span></span><span style=display:flex><span>userProfileURL : https://cad.onshape.com/api/users/sessioninfo
</span></span></code></pre></div><p>The callback function will provide us with the <code>accessToken</code>, the <code>refreshToken</code>, and the userâ€™s Onshape profile once authentication has been successfully passed. We can now use this to update our database with user-specific information.</p><p>Note that if you store the <code>accessToken</code> and <code>refreshToken</code> in the database along with the user record, you must update it each time that the access codes are refreshed.</p><ol start=8><li>Next, we define our endpoint where the authorization flow starts (in this case, <code>/oauthSignin</code>). This is the endpoint that we previously defined in the Onshape application setup. This will redirect to an Onshape page in order for the user to confirm (or deny) the applications access to theOnshape resources.</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Define the Onshape API endpoint
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>app.use(<span style=color:#a50>&#39;/oauthSignin&#39;</span>, (req, res) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#aaa;font-style:italic>/* These 5 lines are specific to the glTF Viewer sample app. You can replace them with the input for whatever Onshape endpoints you are using in your app */</span>
</span></span><span style=display:flex><span>    <span style=color:#00a>const</span> state = {
</span></span><span style=display:flex><span>        docId: req.query.documentId,
</span></span><span style=display:flex><span>        workId: req.query.workspaceId,
</span></span><span style=display:flex><span>        elId: req.query.elementId
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    req.session.state = state;
</span></span><span style=display:flex><span>    <span style=color:#00a>return</span> passport.authenticate(<span style=color:#a50>&#39;onshape&#39;</span>, { state: uuid.v4(state) })(req, res);
</span></span><span style=display:flex><span>}, (req, res) =&gt; {    
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> });
</span></span></code></pre></div><h3 id=3-exchange-the-code-for-an-access-token>3: Exchange the code for an access token</h3><p>Fortunately, if you are using Passport, there isnâ€™t much to do once the user grants authorization. The return URL will contain the one-time authorization token, which Passport will extract and exchange for an access token and a refresh token, which are available in Passport callback function.</p><ol><li>Add the following code to <code>app.js</code>:</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Exchange the code for an access token
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>app.use(<span style=color:#a50>&#39;/oauthRedirect&#39;</span>, passport.authenticate(<span style=color:#a50>&#39;onshape&#39;</span>, { failureRedirect: <span style=color:#a50>&#39;/grantDenied&#39;</span> }), (req, res) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#aaa;font-style:italic>/* This code is specific to the glTF Viewer sample app. You can replace it with the input for whatever Onshape endpoints you are using in your app. */</span>
</span></span><span style=display:flex><span>    res.redirect(<span style=color:#a50>`/?documentId=</span><span style=color:#a50>${</span>req.session.state.docId<span style=color:#a50>}</span><span style=color:#a50>
</span></span></span><span style=display:flex><span><span style=color:#a50>&amp;workspaceId=</span><span style=color:#a50>${</span>req.session.state.workId<span style=color:#a50>}</span><span style=color:#a50>&amp;elementId=
</span></span></span><span style=display:flex><span><span style=color:#a50>    </span><span style=color:#a50>${</span>req.session.state.elId<span style=color:#a50>}</span><span style=color:#a50>`</span>);
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><ol start=2><li>If the user clicks <strong>Deny</strong> instead of <strong>Authorize Application</strong>, they are taken to a page that notifies them that access to the application was denied. We can see that in the <code>failureRedirect</code> argument. Add the following to <code>app.js</code>:</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Handle denied access
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>app.get(<span style=color:#a50>&#39;/grantDenied&#39;</span>, (req, res) =&gt; {
</span></span><span style=display:flex><span>    res.sendFile(path.join(__dirname, <span style=color:#a50>&#39;public&#39;</span>, <span style=color:#a50>&#39;html&#39;</span>, <span style=color:#a50>&#39;grantDenied.html&#39;</span>));
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>Now we have received the access token, and it can be accessed from <code>res.user.accessToken</code> on this page or from <code>req.user.accessToken</code> from any other page you redirect to from here.</p><h3 id=4-use-the-access-token>4: Use the access token</h3><ol><li>Add the following to the bottom of <code>app.js</code>. You can see that the access token is used as an Authorization header:</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Use the access token as an Authorization header
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>makeOnshapeAPICall: <span style=color:#00a>async</span> (req, res) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#00a>try</span> {
</span></span><span style=display:flex><span>            <span style=color:#00a>const</span> apiUrl = <span style=color:#a50>&#34;https://cad.onshape.com/api/documents?ownerType=1&amp;sortColumn=createdAt&amp;sortOrder=desc&amp;offset=0&amp;limit=20&#34;</span>; <span style=color:#aaa;font-style:italic>//You can replace this with any Onshape API endpoint URL.
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>            <span style=color:#00a>const</span> resp = <span style=color:#00a>await</span> fetch(normalizedUrl, { headers: { Authorization: <span style=color:#a50>`Bearer </span><span style=color:#a50>${</span>req.user.accessToken<span style=color:#a50>}</span><span style=color:#a50>`</span> }});
</span></span><span style=display:flex><span>            <span style=color:#00a>const</span> data = <span style=color:#00a>await</span> resp.text();
</span></span><span style=display:flex><span>            <span style=color:#00a>const</span> contentType = resp.headers.get(<span style=color:#a50>&#39;Content-Type&#39;</span>);
</span></span><span style=display:flex><span>            res.status(resp.status).contentType(contentType).send(data);
</span></span><span style=display:flex><span>        } <span style=color:#00a>catch</span> (err) {
</span></span><span style=display:flex><span>            res.status(<span style=color:#099>500</span>).json({ error: err });
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>Note: in the glTF Viewer sample app, this code appears in <code>utils.js</code> instead of <code>app.js</code>.</p><h3 id=5-refresh-the-token>5: Refresh the token</h3><p>When the access token expires, it must be refreshed by making another <code>POST</code> request toÂ <code>https://oauth.onshape.com/oauth/token</code>Â with the following URL-encoded form body (with <code>Content-TypeÂ application/x-www-form-urlencoded</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#a00>grant_type</span>=refresh_token&amp;<span style=color:#a00>refresh_token</span>=<span style=color:#a50>\&lt;</span>refresh_token<span style=color:#a50>\&gt;</span>&amp;<span style=color:#a00>client_id</span>=<span style=color:#a50>\&lt;</span>client_id<span style=color:#a50>\&gt;</span>&amp;<span style=color:#a00>client_secret</span>=<span style=color:#a50>\&lt;</span>client_secret<span style=color:#a50>\&gt;</span>
</span></span></code></pre></div><p>As with the authorization code data, the parameters in the form body must be URL-encoded. The response to this <code>POST</code> request will be a JSON-encoded structure with a newÂ <code>access_token</code>Â value that can be used for the next 60 minutes.</p><p>Refresh tokens are valid for the lifetime of the userâ€™s grant. If a user who previously granted access to your application decides to revoke the grant, the refresh token is invalidated. If the user decides to re-grant application access, a new refresh token is generated and returned along with the access token.</p><ol><li>Add the following to <code>app.js</code>:</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#aaa;font-style:italic>/** After landing on the home page, we check if a user had already signed in. If no user has signed in, we redirect the request to the OAuth sign-in page. If a user had signed in previously, we will attempt to refresh the access token of the user. After successfully refreshing the access token, we will simply take the user to the landing page of the app. If the refresh token request fails, we will redirect the user to the OAuth sign-in page again. */</span>
</span></span><span style=display:flex><span>app.get(<span style=color:#a50>&#39;/&#39;</span>, (req, res) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#00a>if</span> (!req.user) {
</span></span><span style=display:flex><span>        <span style=color:#00a>return</span> res.redirect(<span style=color:#a50>`/oauthSignin</span><span style=color:#a50>${</span>req._parsedUrl.search ? req._parsedUrl.search : <span style=color:#a50>&#34;&#34;</span><span style=color:#a50>}</span><span style=color:#a50>`</span>);
</span></span><span style=display:flex><span>    } <span style=color:#00a>else</span> {
</span></span><span style=display:flex><span>        refreshAccessToken(req.user).then((tokenJson) =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#aaa;font-style:italic>// Dereference the user object and update the access token and refresh token in the in-memory object.
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>            <span style=color:#00a>let</span> usrObj = JSON.parse(JSON.stringify(req.user));
</span></span><span style=display:flex><span>            usrObj.accessToken = tokenJson.access_token;
</span></span><span style=display:flex><span>            usrObj.refreshToken = tokenJson.refresh_token;
</span></span><span style=display:flex><span>            <span style=color:#aaa;font-style:italic>// Update the user object in PassportJS. No redirections will happen here, this is a purely internal operation.
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>            req.login(usrObj, () =&gt; {
</span></span><span style=display:flex><span>                <span style=color:#00a>return</span> res.sendFile(path.join(__dirname, <span style=color:#a50>&#39;public&#39;</span>, <span style=color:#a50>&#39;html&#39;</span>, <span style=color:#a50>&#39;index.html&#39;</span>));
</span></span><span style=display:flex><span>            });
</span></span><span style=display:flex><span>        }).<span style=color:#00a>catch</span>(() =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#aaa;font-style:italic>// Refresh token failed, take the user to OAuth sign in page.
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>            <span style=color:#00a>return</span> res.redirect(<span style=color:#a50>`/oauthSignin</span><span style=color:#a50>${</span>req._parsedUrl.search ? req._parsedUrl.search : <span style=color:#a50>&#34;&#34;</span><span style=color:#a50>}</span><span style=color:#a50>`</span>);
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Refresh the access token
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span><span style=color:#00a>const</span> refreshAccessToken = <span style=color:#00a>async</span> (user) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#00a>const</span> body = <span style=color:#a50>&#39;grant_type=refresh_token&amp;refresh_token=&#39;</span> + user.refreshToken + <span style=color:#a50>&#39;&amp;client_id=&#39;</span> + config.oauthClientId + <span style=color:#a50>&#39;&amp;client_secret=&#39;</span> + config.oauthClientSecret;
</span></span><span style=display:flex><span>    <span style=color:#00a>let</span> res = <span style=color:#00a>await</span> fetch(config.oauthUrl + <span style=color:#a50>&#34;/oauth/token&#34;</span>, {
</span></span><span style=display:flex><span>        method: <span style=color:#a50>&#39;POST&#39;</span>,
</span></span><span style=display:flex><span>        headers: {
</span></span><span style=display:flex><span>            <span style=color:#a50>&#39;Content-Type&#39;</span>: <span style=color:#a50>&#39;application/x-www-form-urlencoded&#39;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        body: body
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#00a>if</span> (res.ok) {
</span></span><span style=display:flex><span>        <span style=color:#00a>return</span> <span style=color:#00a>await</span> res.json();
</span></span><span style=display:flex><span>    } <span style=color:#00a>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#00a>throw</span> <span style=color:#00a>new</span> <span style=color:#0aa>Error</span>(<span style=color:#a50>&#34;Could not refresh access token, please sign in again.&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app.use(<span style=color:#a50>&#39;/api&#39;</span>, require(<span style=color:#a50>&#39;./api&#39;</span>));
</span></span><span style=display:flex><span>module.exports = app;
</span></span></code></pre></div><ol start=2><li>Save the file.</li><li>To see the authentication working in practice, you can follow the instructions in the <a href=https://github.com/onshape-public/app-gltf-viewer#readme>glTF Viewer README</a> to deploy the glTF Viewer app.</li></ol><h3 id=6-grant-authorization>6: Grant authorization</h3><p>For apps published in the Onshape App Store, the Onshape user must grant authorization to your application to access the Onshape data. This must be done by each user of your app.</p><p>To grant the application access to a user&rsquo;s data in Onshape, the <em>Onshape user</em> must follow the steps below:</p><ol><li>Sign in to <code>cad.onshape.com</code>.<ul><li>Note: Use <code>https://companyName.onshape.com</code> for Enterprise accounts. See <a href=#enterprise-users>Enterprise users</a> below for more information.</li></ul></li><li>Click their name in the top-right corner of the Onshape window, and then click <strong>My account</strong> in the dropdown menu.</br><img src=/images/myaccountdropdown.png alt=drawing width=300></li><li>Click <strong>Applications</strong> in the left sidebar.<ul><li>Note that the gltf-viewer app will not appear in this list until it has been deployed and subscribed to as described in the <a href=https://github.com/onshape-public/app-gltf-viewer#readme>glTF Viewer README</a>.</li></ul></li><li>Click <strong>Grant</strong> next to your app name to grant it access to their Onshape data. The Onshape user can click <strong>Revoke</strong> at any time to prevent your app from accessing their Onshape data.</li><li>The user will see the Authorize application screen shown below and will need to confirm their authorization grant by clicking <strong>Authorize application</strong>. The user is then redirected to the Redirect URL you specified in your code. Your app can now access the user&rsquo;s Onshape resources and profile.</li></ol><h2 id=notes>Notes</h2><h3 id=installed-desktop-applications>Installed desktop applications</h3><p>OAuth is designed for interactions between two servers using a browser. However, it can also be used by an installed desktop (or mobile) application. The application must perform a similar role to that of a third party server: it must exchange the code for an access token structure.</p><p>To enable this, Onshape allows two special forms of redirect URI to be registered:</p><ul><li><code>http://localhost:&lt;port></code> Causes the browser to attempt to load a page from the host upon which it is running. The code parameter will be supplied exactly the same as outlined above. If the application can listen on the registered port and behave as a simple web server for the redirect URL, it can retrieve the code in the same way as a deployed web server.</li><li><code>urn:ietf:wg:oauth:2.0:oob</code> Causes the browser to display a simple page after a request has been granted instead of going to a new URL. The page contains simple instructions to copy and paste code into an application field. The browser will also update the title of the window to contain the code. An application could also look for browsers with window titles containing the string <code>Success code=&lt;code></code> and automatically grab the code from the browser window title. If an error occurs (e.g., the grant is denied), the browser window title will contain <code>Error description=&lt;error string></code>.</li></ul><h3 id=enterprise-users>Enterprise users</h3><p>When a user authorizes an OAuth app to access Onshape on their behalf, they get a bearer token that corresponds to their session and the allowed scopes.</p><p>However, if the user has a seat in the Enterprise, additional information is needed to determine whether to allow the bearer token to access enterprise data for the user or simply return non-enterprise data. We use the <code>company_id</code> field for this distinction.</p><p>There are two ways of setting the <code>company_id</code> correctly to access enterprise data:</p><ul><li>During the authorization process, select the name and URL of the enterprise instead of <code>cad.onshape.com</code>. This will correctly associate your bearer token with the <code>company_id</code>.</li><li>If you have an integrated app, call the <a href=https://cad.onshape.com/glassworks/explorer/#/Company/findCompany>Company/findCompany</a> endpoint to obtain the <code>id</code> from the <code>company</code> object. Append this <code>company_id</code> as a query parameter to the <code>/authorize</code> URL while initiating the OAuth workflow. (Note: you may be asked to authenticate yourself again.)</li></ul><h3 id=3rd-party-cookies>3rd-party cookies</h3><p>3rd-party cookies must be enabled in the browser for Onshape apps to work correctly.</p><h3 id=debugging>Debugging</h3><p>Debugging OAuth can be a little tricky. Some tips are below:</p><ol><li>Make sure you are correctly URL encoding the values supplied to the oauth/authorize and oauth/token endpoints.</li><li>Use a <code>GET /oauth/authorize</code> but a <code>POST /oauth/token</code> and make sure that the GET uses query parameters but that the <code>POST</code> uses a URL-encoded form body.</li><li>If you supply a <code>redirect_uri</code> to <code>/oauth/authorize</code>, you must also supply it as an additional parameter in the <code>POST</code> to <code>/oauth/token</code></li><li>Use a tool such as <a href=https://portswigger.net/burp>Burp</a> or <a href=http://charlesproxy.com>Charles</a> to deliberately &lsquo;man-in-the-middle&rsquo; the connection requests between your server and Onshape, and verify that you are performing the correct REST operations (GET vs. POST) and correctly URL-encoding the parameter values.</li></ol><h2 id=final-code>Final Code</h2><p>The above example uses Node.js to authenticate an Onshape app. This section includes the code for using OAuth2 with other coding languages.</p><h3 id=nodejs>Node.js</h3><p><strong>Prerequisites</strong></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install passport
</span></span><span style=display:flex><span>npm install passport-onshape
</span></span></code></pre></div><p><strong>Environment variables</strong></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>authorizationURL : &lt;https://oauth.onshape.com/oauth/authorize&gt;
</span></span><span style=display:flex><span>tokenURL : &lt;https://oauth.onshape.com/oauth/token&gt;
</span></span><span style=display:flex><span>userProfileURL : &lt;https://cad.onshape.com/api/users/sessioninfo&gt;
</span></span></code></pre></div><p><strong>app.js</strong></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#aaa;font-style:italic>//App definitions
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span><span style=color:#00a>const</span> path = require(<span style=color:#a50>&#39;path&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#00a>const</span> uuid = require(<span style=color:#a50>&#39;uuid&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a>const</span> express = require(<span style=color:#a50>&#39;express&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#00a>const</span> session = require(<span style=color:#a50>&#39;express-session&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#00a>const</span> bodyParser = require(<span style=color:#a50>&#39;body-parser&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a>const</span> passport = require(<span style=color:#a50>&#39;passport&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#00a>const</span> OnshapeStrategy = require(<span style=color:#a50>&#39;passport-onshape&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a>const</span> config = require(<span style=color:#a50>&#39;./config&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Tell Express to use Passport, and initialize it.
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span><span style=color:#00a>const</span> app = express();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app.use(express.<span style=color:#00a>static</span>(path.join(__dirname, <span style=color:#a50>&#39;public&#39;</span>)));
</span></span><span style=display:flex><span>app.use(express.<span style=color:#00a>static</span>(path.join(__dirname, <span style=color:#a50>&#39;dist&#39;</span>)));
</span></span><span style=display:flex><span>app.use(bodyParser.json());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app.set(<span style=color:#a50>&#39;trust proxy&#39;</span>, <span style=color:#099>1</span>); <span style=color:#aaa;font-style:italic>// To allow to run correctly behind Heroku when deployed.
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>
</span></span><span style=display:flex><span>app.use(session({
</span></span><span style=display:flex><span>    secret: config.sessionSecret,
</span></span><span style=display:flex><span>    saveUninitialized: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    resave: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    cookie: {
</span></span><span style=display:flex><span>        name: <span style=color:#a50>&#39;app-gltf-viewer&#39;</span>,
</span></span><span style=display:flex><span>        sameSite: <span style=color:#a50>&#39;none&#39;</span>,
</span></span><span style=display:flex><span>        secure: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>        httpOnly: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>        path: <span style=color:#a50>&#39;/&#39;</span>,
</span></span><span style=display:flex><span>        maxAge: <span style=color:#099>1000</span> * <span style=color:#099>60</span> * <span style=color:#099>60</span> * <span style=color:#099>24</span> <span style=color:#aaa;font-style:italic>// 1 day
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>    }
</span></span><span style=display:flex><span>}));
</span></span><span style=display:flex><span>app.use(passport.initialize());
</span></span><span style=display:flex><span>app.use(passport.session());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Store the Onshape user information
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>passport.serializeUser((user, done) =&gt; done(<span style=color:#00a>null</span>, user));
</span></span><span style=display:flex><span>passport.deserializeUser((obj, done) =&gt; done(<span style=color:#00a>null</span>, obj));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Initialize Passport with the Onshape Strategy
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>passport.use(<span style=color:#00a>new</span> OnshapeStrategy({
</span></span><span style=display:flex><span>        clientID: config.oauthClientId,
</span></span><span style=display:flex><span>        clientSecret: config.oauthClientSecret,
</span></span><span style=display:flex><span>        callbackURL: config.oauthCallbackUrl,
</span></span><span style=display:flex><span>        authorizationURL: <span style=color:#a50>`</span><span style=color:#a50>${</span>config.oauthUrl<span style=color:#a50>}</span><span style=color:#a50>/oauth/authorize`</span>,
</span></span><span style=display:flex><span>        tokenURL: <span style=color:#a50>`</span><span style=color:#a50>${</span>config.oauthUrl<span style=color:#a50>}</span><span style=color:#a50>/oauth/token`</span>,
</span></span><span style=display:flex><span>        userProfileURL: <span style=color:#a50>`</span><span style=color:#a50>${</span>config.oauthUrl<span style=color:#a50>}</span><span style=color:#a50>/api/users/sessioninfo`</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    (accessToken, refreshToken, profile, done) =&gt; {
</span></span><span style=display:flex><span>        profile.accessToken = accessToken;
</span></span><span style=display:flex><span>        profile.refreshToken = refreshToken;
</span></span><span style=display:flex><span>        <span style=color:#00a>return</span> done(<span style=color:#00a>null</span>, profile);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Define the Onshape API endpoint
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>app.use(<span style=color:#a50>&#39;/oauthSignin&#39;</span>, (req, res) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#aaa;font-style:italic>/* These 5 lines are specific to the glTF Viewer sample app. You can replace them with the input for whatever Onshape endpoints you are using in your app. */</span>
</span></span><span style=display:flex><span>    <span style=color:#00a>const</span> state = {
</span></span><span style=display:flex><span>        docId: req.query.documentId,
</span></span><span style=display:flex><span>        workId: req.query.workspaceId,
</span></span><span style=display:flex><span>        elId: req.query.elementId
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    req.session.state = state;
</span></span><span style=display:flex><span>    <span style=color:#00a>return</span> passport.authenticate(<span style=color:#a50>&#39;onshape&#39;</span>, { state: uuid.v4(state) })(req, res);
</span></span><span style=display:flex><span>}, (req, res) =&gt; {    
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app.use(<span style=color:#a50>&#39;/oauthRedirect&#39;</span>, passport.authenticate(<span style=color:#a50>&#39;onshape&#39;</span>, { failureRedirect: <span style=color:#a50>&#39;/grantDenied&#39;</span> }), (req, res) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#aaa;font-style:italic>/* This code is specific to the glTF Viewer sample app. You can replace it with the input for whatever Onshape endpoints you are using in your app. */</span>
</span></span><span style=display:flex><span>    res.redirect(<span style=color:#a50>`/?documentId=</span><span style=color:#a50>${</span>req.session.state.docId<span style=color:#a50>}</span><span style=color:#a50>&amp;workspaceId=</span><span style=color:#a50>${</span>req.session.state.workId<span style=color:#a50>}</span><span style=color:#a50>&amp;elementId=</span><span style=color:#a50>${</span>req.session.state.elId<span style=color:#a50>}</span><span style=color:#a50>`</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Handle denied access
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>app.get(<span style=color:#a50>&#39;/grantDenied&#39;</span>, (req, res) =&gt; {
</span></span><span style=display:flex><span>    res.sendFile(path.join(__dirname, <span style=color:#a50>&#39;public&#39;</span>, <span style=color:#a50>&#39;html&#39;</span>, <span style=color:#a50>&#39;grantDenied.html&#39;</span>));
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic>/** After landing on the home page, we check if a user had already signed in. If no user has signed in, we redirect the request to the OAuth sign-in page. If a user had signed in previously, we will attempt to refresh the access token of the user. After successfully refreshing the access token, we will simply take the user to the landing page of the app. If the refresh token request fails, we will redirect the user to the OAuth sign-in page again. */</span>
</span></span><span style=display:flex><span>app.get(<span style=color:#a50>&#39;/&#39;</span>, (req, res) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#00a>if</span> (!req.user) {
</span></span><span style=display:flex><span>        <span style=color:#00a>return</span> res.redirect(<span style=color:#a50>`/oauthSignin</span><span style=color:#a50>${</span>req._parsedUrl.search ? req._parsedUrl.search : <span style=color:#a50>&#34;&#34;</span><span style=color:#a50>}</span><span style=color:#a50>`</span>);
</span></span><span style=display:flex><span>    } <span style=color:#00a>else</span> {
</span></span><span style=display:flex><span>        refreshAccessToken(req.user).then((tokenJson) =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#aaa;font-style:italic>// Dereference the user object, and update the access token and refresh token in the in-memory object.
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>            <span style=color:#00a>let</span> usrObj = JSON.parse(JSON.stringify(req.user));
</span></span><span style=display:flex><span>            usrObj.accessToken = tokenJson.access_token;
</span></span><span style=display:flex><span>            usrObj.refreshToken = tokenJson.refresh_token;
</span></span><span style=display:flex><span>            <span style=color:#aaa;font-style:italic>// Update the user object in PassportJS. No redirections will happen here, this is a purely internal operation.
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>            req.login(usrObj, () =&gt; {
</span></span><span style=display:flex><span>                <span style=color:#00a>return</span> res.sendFile(path.join(__dirname, <span style=color:#a50>&#39;public&#39;</span>, <span style=color:#a50>&#39;html&#39;</span>, <span style=color:#a50>&#39;index.html&#39;</span>));
</span></span><span style=display:flex><span>            });
</span></span><span style=display:flex><span>        }).<span style=color:#00a>catch</span>(() =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#aaa;font-style:italic>// Refresh token failed, take the user to OAuth sign in page.
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>            <span style=color:#00a>return</span> res.redirect(<span style=color:#a50>`/oauthSignin</span><span style=color:#a50>${</span>req._parsedUrl.search ? req._parsedUrl.search : <span style=color:#a50>&#34;&#34;</span><span style=color:#a50>}</span><span style=color:#a50>`</span>);
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Refresh the access token
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span><span style=color:#00a>const</span> refreshAccessToken = <span style=color:#00a>async</span> (user) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#00a>const</span> body = <span style=color:#a50>&#39;grant_type=refresh_token&amp;refresh_token=&#39;</span> + user.refreshToken + <span style=color:#a50>&#39;&amp;client_id=&#39;</span> + config.oauthClientId + <span style=color:#a50>&#39;&amp;client_secret=&#39;</span> + config.oauthClientSecret;
</span></span><span style=display:flex><span>    <span style=color:#00a>let</span> res = <span style=color:#00a>await</span> fetch(config.oauthUrl + <span style=color:#a50>&#34;/oauth/token&#34;</span>, {
</span></span><span style=display:flex><span>        method: <span style=color:#a50>&#39;POST&#39;</span>,
</span></span><span style=display:flex><span>        headers: {
</span></span><span style=display:flex><span>            <span style=color:#a50>&#39;Content-Type&#39;</span>: <span style=color:#a50>&#39;application/x-www-form-urlencoded&#39;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        body: body
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#00a>if</span> (res.ok) {
</span></span><span style=display:flex><span>        <span style=color:#00a>return</span> <span style=color:#00a>await</span> res.json();
</span></span><span style=display:flex><span>    } <span style=color:#00a>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#00a>throw</span> <span style=color:#00a>new</span> <span style=color:#0aa>Error</span>(<span style=color:#a50>&#34;Could not refresh access token, please sign in again.&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app.use(<span style=color:#a50>&#39;/api&#39;</span>, require(<span style=color:#a50>&#39;./api&#39;</span>));
</span></span><span style=display:flex><span>module.exports = app;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic>//Use the access token in an Authorization header.
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>makeOnshapeAPICall: <span style=color:#00a>async</span> (req, res) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#00a>try</span> {
</span></span><span style=display:flex><span>            <span style=color:#00a>const</span> apiUrl = <span style=color:#a50>&#34;https://cad.onshape.com/glassworks/explorer/#/Document/getDocuments&#34;</span>; <span style=color:#aaa;font-style:italic>//You can replace this with any Onshape API endpoint URL.
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>            <span style=color:#00a>const</span> resp = <span style=color:#00a>await</span> fetch(normalizedUrl, { headers: { Authorization: <span style=color:#a50>`Bearer </span><span style=color:#a50>${</span>req.user.accessToken<span style=color:#a50>}</span><span style=color:#a50>`</span> }});
</span></span><span style=display:flex><span>            <span style=color:#00a>const</span> data = <span style=color:#00a>await</span> resp.text();
</span></span><span style=display:flex><span>            <span style=color:#00a>const</span> contentType = resp.headers.get(<span style=color:#a50>&#39;Content-Type&#39;</span>);
</span></span><span style=display:flex><span>            res.status(resp.status).contentType(contentType).send(data);
</span></span><span style=display:flex><span>        } <span style=color:#00a>catch</span> (err) {
</span></span><span style=display:flex><span>            res.status(<span style=color:#099>500</span>).json({ error: err });
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><h3 id=python>Python</h3><p>This Python code only works on a local machine. To deploy the code, you can replace the Flask code with the web server of your choice.</p><p><strong>Prerequisites</strong></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip3 install flask
</span></span><span style=display:flex><span>pip3 install requests_oauthlib
</span></span></code></pre></div><p><strong>app.py</strong></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#00a>from</span> <span style=color:#0aa;text-decoration:underline>flask</span> <span style=color:#00a>import</span> Flask, request, redirect, session, url_for
</span></span><span style=display:flex><span><span style=color:#00a>from</span> <span style=color:#0aa;text-decoration:underline>flask.json</span> <span style=color:#00a>import</span> jsonify
</span></span><span style=display:flex><span><span style=color:#00a>from</span> <span style=color:#0aa;text-decoration:underline>requests_oauthlib</span> <span style=color:#00a>import</span> OAuth2Session
</span></span><span style=display:flex><span><span style=color:#00a>import</span> <span style=color:#0aa;text-decoration:underline>os</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app = Flask(__name__)
</span></span><span style=display:flex><span>app.secret_key = <span style=color:#a50>b</span><span style=color:#a50>&#39;F</span><span style=color:#a50>\xf5\xe5\xc0\xbe\t</span><span style=color:#a50>g</span><span style=color:#a50>\x7f\xac\x89\x87</span><span style=color:#a50>e</span><span style=color:#a50>\xc2</span><span style=color:#a50>4</span><span style=color:#a50>\xe8</span><span style=color:#a50>m</span><span style=color:#a50>\x1c\xd9\xda\x96</span><span style=color:#a50>G,</span><span style=color:#a50>\x90</span><span style=color:#a50>i&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>os.environ[<span style=color:#a50>&#39;OAUTHLIB_INSECURE_TRANSPORT&#39;</span>] = <span style=color:#a50>&#34;1&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>client_id = &lt;Client ID of your application&gt;
</span></span><span style=display:flex><span>client_secret = &lt;Client Secret of your application&gt;
</span></span><span style=display:flex><span>authorization_base_url = <span style=color:#a50>&#34;https://oauth.onshape.com/oauth/authorize&#34;</span>
</span></span><span style=display:flex><span>token_url = <span style=color:#a50>&#34;https://oauth.onshape.com/oauth/token&#34;</span>
</span></span><span style=display:flex><span>redirect_url = <span style=color:#a50>&#34;http://localhost:5000/token&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888>@app.route</span>(<span style=color:#a50>&#39;/&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#00a>def</span> <span style=color:#0a0>home</span>():
</span></span><span style=display:flex><span>  onshape = OAuth2Session(client_id, redirect_uri=redirect_url)
</span></span><span style=display:flex><span>  auth_url, state = onshape.authorization_url(authorization_base_url)
</span></span><span style=display:flex><span>  session[<span style=color:#a50>&#39;oauth_state&#39;</span>] = state
</span></span><span style=display:flex><span>  <span style=color:#00a>return</span> redirect(auth_url)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888>@app.route</span>(<span style=color:#a50>&#39;/token&#39;</span>, methods=[<span style=color:#a50>&#34;GET&#34;</span>])
</span></span><span style=display:flex><span><span style=color:#00a>def</span> <span style=color:#0a0>token</span>():
</span></span><span style=display:flex><span>  onshape = OAuth2Session(client_id, state=session[<span style=color:#a50>&#39;oauth_state&#39;</span>], redirect_uri=redirect_url)
</span></span><span style=display:flex><span>  token = onshape.fetch_token(token_url, client_secret=client_secret, authorization_response=request.url)
</span></span><span style=display:flex><span>  session[<span style=color:#a50>&#39;oauth_token&#39;</span>] = token
</span></span><span style=display:flex><span>  <span style=color:#00a>return</span> redirect(url_for(<span style=color:#a50>&#39;.documents&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888>@app.route</span>(<span style=color:#a50>&#39;/documents&#39;</span>, methods=[<span style=color:#a50>&#34;GET&#34;</span>])
</span></span><span style=display:flex><span><span style=color:#00a>def</span> <span style=color:#0a0>documents</span>():
</span></span><span style=display:flex><span>  extra = {
</span></span><span style=display:flex><span>    <span style=color:#a50>&#39;client_id&#39;</span>: client_id,
</span></span><span style=display:flex><span>    <span style=color:#a50>&#39;client_secret&#39;</span>: client_secret,
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  onshape = OAuth2Session(client_id, token=session[<span style=color:#a50>&#39;oauth_token&#39;</span>], redirect_uri=redirect_url)
</span></span><span style=display:flex><span>  session[<span style=color:#a50>&#39;oauth_token&#39;</span>] = onshape.refresh_token(token_url, **extra)
</span></span><span style=display:flex><span>  <span style=color:#00a>return</span> jsonify(onshape.get(<span style=color:#a50>&#39;https://cad.onshape.com/api/v6/documents?q=Untitled&amp;ownerType=1&amp;sortColumn=createdAt&amp;sortOrder=desc&amp;offset=0&amp;limit=20&#39;</span>).json())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a>if</span> __name__ == <span style=color:#a50>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>  app.run()
</span></span><span style=display:flex><span>  
</span></span></code></pre></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"></div></div></div></footer></div><script src=/js/main.min.69e2c1ae9320465ab10236d9ef752c6a4442c54b48b883b17c497b7c7d96a796.js integrity="sha256-aeLBrpMgRlqxAjbZ73UsakRCxUtIuIOxfEl7fH2Wp5Y=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>